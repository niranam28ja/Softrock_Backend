"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const ava_1 = require("ava");
const hjs = require("hash.js");
const path = require("path");
const lib_1 = require("../lib");
const utils_1 = require("../lib/utils");
ava_1.default('time hash', t => {
    t.is(utils_1.createTimeHash().length, 'yyyyMMddHHmmss'.length);
});
ava_1.default('compute request hash', t => {
    const sink = 'MSTRF1800000001743720190805221708';
    const key = 'JJoa97DitZ8rJkWrmRTgg7573htuoi6iaY5ux92l8UhF0efP6a0xhgdS0Jd62676Wl0Qfn60gLGv36Pp';
    const digest = hjs
        .hmac(hjs.sha256, key)
        .update(sink)
        .digest('hex');
    t.is(digest, 'a0e90f9039a789b6cf8040ca6fc0d3b0dac8644f51759a9b6ab2e111dc4719bb');
});
ava_1.default('file api credentials provider', (t) => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
    const provider = lib_1.createFileCredentialsProvider(path.join(__dirname, 'file_creds.json'));
    const credentials = yield provider();
    t.is(credentials.secretId, '281b059a0d2e4b57a837252d89de7b6b');
    t.is(credentials.secretKey, 'e75c28d544e24e14a5101996fa3be6b3');
}));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXRpbHMudGVzdC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3Rlc3RzL3V0aWxzLnRlc3QudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUEsNkJBQXVCO0FBQ3ZCLCtCQUErQjtBQUMvQiw2QkFBNkI7QUFDN0IsZ0NBQXVEO0FBQ3ZELHdDQUE4QztBQUU5QyxhQUFJLENBQUMsV0FBVyxFQUFFLENBQUMsQ0FBQyxFQUFFO0lBQ2xCLENBQUMsQ0FBQyxFQUFFLENBQUMsc0JBQWMsRUFBRSxDQUFDLE1BQU0sRUFBRSxnQkFBZ0IsQ0FBQyxNQUFNLENBQUMsQ0FBQztBQUMzRCxDQUFDLENBQUMsQ0FBQztBQUVILGFBQUksQ0FBQyxzQkFBc0IsRUFBRSxDQUFDLENBQUMsRUFBRTtJQUM3QixNQUFNLElBQUksR0FBRyxtQ0FBbUMsQ0FBQztJQUNqRCxNQUFNLEdBQUcsR0FBRyxrRkFBa0YsQ0FBQztJQUMvRixNQUFNLE1BQU0sR0FBRyxHQUFHO1NBQ2IsSUFBSSxDQUFDLEdBQUcsQ0FBQyxNQUFhLEVBQUUsR0FBRyxDQUFDO1NBQzVCLE1BQU0sQ0FBQyxJQUFJLENBQUM7U0FDWixNQUFNLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDbkIsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsa0VBQWtFLENBQUMsQ0FBQztBQUNyRixDQUFDLENBQUMsQ0FBQztBQUVILGFBQUksQ0FBQywrQkFBK0IsRUFBRSxDQUFNLENBQUMsRUFBQyxFQUFFO0lBQzVDLE1BQU0sUUFBUSxHQUFHLG1DQUE2QixDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxFQUFFLGlCQUFpQixDQUFDLENBQUMsQ0FBQztJQUN4RixNQUFNLFdBQVcsR0FBRyxNQUFNLFFBQVEsRUFBRSxDQUFDO0lBQ3JDLENBQUMsQ0FBQyxFQUFFLENBQUMsV0FBVyxDQUFDLFFBQVEsRUFBRSxrQ0FBa0MsQ0FBQyxDQUFDO0lBQy9ELENBQUMsQ0FBQyxFQUFFLENBQUMsV0FBVyxDQUFDLFNBQVMsRUFBRSxrQ0FBa0MsQ0FBQyxDQUFDO0FBQ3BFLENBQUMsQ0FBQSxDQUFDLENBQUMifQ==